(function(n){typeof define=="function"&&define.amd?define(n):n()})(function(){"use strict";const n=["discordsays.com","discordsez.com"],r="/.proxy";function h(){return new URLSearchParams(window.location.search).get("frame_id")!=null}function a(t,o=r){const e=typeof t=="string"?window.location.origin:void 0,c=new URL(t.toString(),e);return n.some(i=>c.hostname.endsWith(i))&&!c.pathname.startsWith(o)&&(c.pathname=o+c.pathname),c}function l(){const t=globalThis.fetch;globalThis.fetch=function(o,e){const{prefix:c=r,...s}=e??{},i=a(o,c);return t(i,s)}}function u(){WebSocket=new Proxy(window.WebSocket,{construct(o,e){const c=a(e[0]),s=e[1];return new o(c,s)}})}const d="node_modules/@robojs/patch/.robo/public/discord-proxy-patch.umd.js",p="assets/discord-proxy-patch.umd.js";function f(){let t;return{name:"discord-proxy-patch",enforce:"pre",configResolved(o){t=o.command},transformIndexHtml(o){const e=t==="build"?p:d;return o.replace("<head>",`<head>
		<script src="${e}"><\/script>`)},async buildStart(){if(t!=="build")return;const o=await this.load({id:d});o!=null&&o.code?this.emitFile({type:"asset",fileName:p,source:o.code}):console.error("Failed to load patch script:",o)}}}const m={patch:b,Vite:f};function b(){h()?(console.log("@robojs/patch: Applying patch for Discord Proxy"),l(),u()):console.log("@robojs/patch: Not in Discord Activity, skipping patch")}m.patch()});
